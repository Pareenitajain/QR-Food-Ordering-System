<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üçΩÔ∏è Food Menu - Order Now</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>


<div class="header">
    <h1>üçΩÔ∏è Our Menu</h1>
    <p>Select delicious food items and place your order</p>
</div>


<div class="menu-container">
    
    
    <form method="POST" action="/place_order" id="orderForm">
        
        <div class="menu-grid">
            {% for food in foods %}
            <div class="food-card">
                <div class="food-card-header">
                    <h3>{{ food.name }}</h3>
                    <div class="food-card-price">‚Çπ{{ food.price }}</div>
                </div>
                <div class="food-card-body">
                    <p class="food-description">{{ food.description }}</p>
                    <div class="food-card-checkbox">
                        <input type="checkbox" 
                               name="item" 
                               value="{{ food.name }} - ‚Çπ{{ food.price }}"
                               id="food-{{ food.id }}"
                               onchange="updateTotal()">
                        <label for="food-{{ food.id }}">Add to Order</label>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>

        
        <div class="checkout-section">
            <h2>üìã Order Summary</h2>
            
            <div class="order-summary" id="orderSummary">
                <div class="empty-order">
                    <div class="empty-order-icon">üì≠</div>
                    <p>No items selected yet. Choose items to continue.</p>
                </div>
            </div>

            <div class="order-summary">
                <div class="order-summary-item">
                    <span>Subtotal:</span>
                    <span id="subtotal">‚Çπ0</span>
                </div>
                <div class="order-summary-item">
                    <span>Delivery Fee:</span>
                    <span>Free</span>
                </div>
                <div class="order-summary-item total">
                    <span>Total Amount:</span>
                    <span id="totalDisplay">‚Çπ0</span>
                </div>
            </div>

            <input type="hidden" name="items" id="items">
            <input type="hidden" name="total" id="total">

            <button type="submit" class="btn btn-primary" id="placeOrderBtn" onclick="prepareOrder()" disabled>
                üõí Place Order (‚Çπ<span id="btnTotal">0</span>)
            </button>
        </div>

    </form>
</div>

<script>
function updateTotal() {
    let selected = [];
    let total = 0;
    let itemCount = 0;

    document.querySelectorAll('input[name="item"]:checked').forEach(item => {
        selected.push(item.value);
        total += parseFloat(item.value.split('‚Çπ')[1]);
        itemCount++;
    });

    
    let summaryHTML = '';
    if (itemCount > 0) {
        document.querySelectorAll('input[name="item"]:checked').forEach(item => {
            const itemText = item.value;
            summaryHTML += `<div class="order-summary-item">
                <span>${itemText.split(' - ')[0]}</span>
                <span>${itemText.split(' - ')[1]}</span>
            </div>`;
        });
    } else {
        summaryHTML = `<div class="empty-order">
            <div class="empty-order-icon">üì≠</div>
            <p>No items selected yet. Choose items to continue.</p>
        </div>`;
    }

    document.getElementById('orderSummary').innerHTML = summaryHTML;
    document.getElementById('subtotal').innerText = '‚Çπ' + total.toFixed(2);
    document.getElementById('totalDisplay').innerText = '‚Çπ' + total.toFixed(2);
    document.getElementById('btnTotal').innerText = total.toFixed(2);

    
    document.getElementById('placeOrderBtn').disabled = itemCount === 0;
    document.getElementById('placeOrderBtn').style.opacity = itemCount === 0 ? '0.6' : '1';

    
    document.getElementById('total').value = total;
}

function prepareOrder() {
    let selected = [];
    
    document.querySelectorAll('input[name="item"]:checked').forEach(item => {
        selected.push(item.value);
    });

    document.getElementById('items').value = selected.join(', ');
}


document.addEventListener('DOMContentLoaded', updateTotal);
</script>

</body>
</html>
